#!/bin/bash
#
# command to be executed from root directory containing S2 Health cloned repos.
#

lib_id=S2-models-demo
terminologies=( loinc rxnorm openehr s2 snomed ucum )

for i in "${terminologies[@]}" ; do
	log_file=$lib_id/logs/inject_${i}.log
	bindings_src=$lib_id/term_bindings/${i}_bindings.csv
	
	if [ -r $bindings_src ]; then
		echo "adlc -q --cfg tools/cfg/adlc.cfg -b $lib_id --inject_term_bindings $i -i $bindings_src" > $log_file
		adlc -q --cfg tools/cfg/adlc.cfg -b $lib_id --inject_term_bindings $i -i $bindings_src >> $log_file 2>&1
	fi
done

